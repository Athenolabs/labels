{"version":3,"file":"labels.min.js","sources":["../../../../apps/labels/labels/public/js/labels.js"],"sourcesContent":["frappe.ui.form.on(\"Production Plan\", {\n    refresh: function (frm) {\n        frm.add_custom_button(__('GENERAR ETIQUETA'), function () {\n            frappe.call({\n                method: \"labels.api_labels.child_table_to_csv\",\n                args: {\n                    dict_data: cur_frm.doc.po_items\n                },\n                callback: function (r) {\n                    window.open(r.message);\n                }\n            });\n        }).addClass(\"btn-primary\");\n\n        cur_frm.page.add_action_icon(__(\"fa fa-file-pdf-o\"), function () {\n\n            let dialog = new frappe.ui.Dialog({\n                title: __('Generar Stickers'),\n                fields: [\n                    {\n                        fieldtype: 'Select',\n                        fieldname: 'sticker_type',\n                        label: __('Estilo de sticker'),\n                        reqd: true,\n                        options: [\n                            \"Sticker sin fechas\",\n                            \"Sticker con fecha de cosecha\",\n                            \"Sticker con fecha de vencimiento\"\n                        ],\n                        description: __('Seleccione el estilo de sticker que desee generar')\n                    },\n                    {\n                        fieldtype: 'Button',\n                        fieldname: 'btn_generar',\n                        label: __('Generar Stickers'),\n                        options: '',\n                        description: __(''),\n                    }\n                ]\n            });\n\n            // Muestra el dialogo\n            dialog.show();\n\n            // Agrega un event lister al boton compartir del dialogo\n            dialog.fields_dict.btn_generar.$wrapper.on('click', function (e) {\n                var estilo_sticker = '0';\n\n                if (dialog.fields_dict.sticker_type.value == 'Sticker sin fechas') {\n                    estilo_sticker = '0';\n                }\n\n                if (dialog.fields_dict.sticker_type.value == 'Sticker con fecha de cosecha') {\n                    estilo_sticker = '1';\n                }\n\n                if (dialog.fields_dict.sticker_type.value == 'Sticker con fecha de vencimiento') {\n                    estilo_sticker = '2';\n                }\n\n                // console.log(estilo_sticker);\n\n                frappe.call({\n                    method: \"labels.api_labels.child_table_to_csv\",\n                    args: {\n                        dict_data: cur_frm.doc.po_items,\n                        sticker_type: estilo_sticker\n                    },\n                    callback: function (r) {\n                        window.open(r.message);\n                    }\n                });\n\n            });\n        });\n    }\n});\n"],"names":["frappe","ui","form","on","refresh","frm","add_custom_button","__","call","method","args","dict_data","cur_frm","doc","po_items","callback","r","window","open","message","addClass","page","add_action_icon","let","dialog","Dialog","title","fields","fieldtype","fieldname","label","reqd","options","description","show","fields_dict","btn_generar","$wrapper","e","estilo_sticker","sticker_type","value"],"mappings":"yBAAAA,OAAOC,GAAGC,KAAKC,GAAG,mBACdC,QAAS,SAAUC,GACfA,EAAIC,kBAAkBC,GAAG,oBAAqB,WAC1CP,OAAOQ,MACHC,OAAQ,uCACRC,MACIC,UAAWC,QAAQC,IAAIC,UAE3BC,SAAU,SAAUC,GAChBC,OAAOC,KAAKF,EAAEG,cAGvBC,SAAS,eAEZR,QAAQS,KAAKC,gBAAgBf,GAAG,oBAAqB,WAEjDgB,IAAIC,EAAS,IAAIxB,OAAOC,GAAGwB,QACvBC,MAAOnB,GAAG,oBACVoB,SAEQC,UAAW,SACXC,UAAW,eACXC,MAAOvB,GAAG,qBACVwB,MAAM,EACNC,SACI,qBACA,+BACA,oCAEJC,YAAa1B,GAAG,uDAGhBqB,UAAW,SACXC,UAAW,cACXC,MAAOvB,GAAG,oBACVyB,QAAS,GACTC,YAAa1B,GAAG,QAM5BiB,EAAOU,OAGPV,EAAOW,YAAYC,YAAYC,SAASlC,GAAG,QAAS,SAAUmC,GAC1D,IAAIC,EAAiB,IAEwB,sBAAzCf,EAAOW,YAAYK,aAAaC,QAChCF,EAAiB,KAGwB,gCAAzCf,EAAOW,YAAYK,aAAaC,QAChCF,EAAiB,KAGwB,oCAAzCf,EAAOW,YAAYK,aAAaC,QAChCF,EAAiB,KAKrBvC,OAAOQ,MACHC,OAAQ,uCACRC,MACIC,UAAWC,QAAQC,IAAIC,SACvB0B,aAAcD,GAElBxB,SAAU,SAAUC,GAChBC,OAAOC,KAAKF,EAAEG"}